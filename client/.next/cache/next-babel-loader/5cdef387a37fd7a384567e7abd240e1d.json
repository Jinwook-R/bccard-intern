{"ast":null,"code":"import { API_BASE_URL } from './config.js';\n\nfunction call(api, method, data, config) {\n  let headers;\n\n  if (config === 'reviewInsertFile') {\n    headers = new Headers({});\n  } else {\n    headers = new Headers({\n      \"Content-Type\": \"application/json\"\n    });\n  }\n\n  const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n\n  if (accessToken && accessToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n\n  const options = {\n    headers,\n    url: API_BASE_URL + api,\n    method\n  };\n\n  if (data && config !== 'reviewInsertFile') {\n    options.body = JSON.stringify(data);\n  } else {\n    options.body = data;\n  }\n\n  return fetch(options.url, options).then(response => response.json().then(json => {\n    if (response.status !== 200) {\n      return Promise.reject(json);\n    }\n\n    return json;\n  }));\n}\n\nexport function loadUser(user) {\n  const headers = new Headers({\n    \"Content-Type\": \"application/json\"\n  });\n  const api = \"/auth\";\n  const method = \"GET\";\n  const options = {\n    headers,\n    url: API_BASE_URL + api,\n    method\n  };\n  options.body = JSON.stringify(user);\n  return fetch(options.url, options).then(res => res.json().then(json => {\n    console.log(res);\n\n    if (res.status == 400) {\n      alert('!');\n      window.location.href = \"/\";\n    }\n\n    return json;\n  }));\n}\nexport function logIn(user) {\n  const headers = new Headers({\n    \"Content-Type\": \"application/json\"\n  });\n  const api = \"/auth/login\";\n  const method = \"POST\";\n  const options = {\n    headers,\n    url: API_BASE_URL + api,\n    method\n  };\n  options.body = JSON.stringify(user);\n  return fetch(options.url, options).then(res => res.json().then(json => {\n    console.log(res);\n\n    if (res.status !== 200) {\n      return Promise.reject(json);\n    }\n\n    return json;\n  }));\n}\nexport function myreviewlist(userId) {\n  console.log('myreviewlist API Called');\n  return call(\"/review/userReview\", \"GET\", userId).then(response => {\n    if (response) {\n      console.log(\"response: \", response);\n    }\n\n    return response;\n  });\n}\nexport function signup(user) {\n  return call(\"/auth/signup\", \"POST\", user).then(response => {\n    console.log(response.status);\n\n    if (response.status === 200) {\n      alert(\"회원가입이 완료되었습니다:)\");\n      location.href = '/';\n    } else {\n      alert(\"회원가입에 실패하였습니다..\");\n    }\n  });\n}\nexport function signout() {\n  localStorage.setItem(\"ACCESS_TOKEN\", null);\n}\nexport function reviewinsert({\n  review\n}) {\n  return call(\"/review/insert\", \"POST\", review).then(response => {\n    console.log(response);\n    alert(\"리뷰등록이 완료되었습니다:)\");\n    location.href = '/';\n  });\n}\nexport function reviewfileinsert({\n  file\n}) {\n  const data = file;\n  console.log(data);\n  return call(\"/review/insertFile\", \"POST\", data, 'reviewInsertFile').then(response => {\n    console.log(response);\n    location.href = '/';\n  });\n}\nexport function restaurantlist() {\n  alert('!!');\n  return call(\"/restaurant/list\", \"GET\").then(response => {\n    if (response) {\n      console.log(\"response: \", response);\n    }\n\n    return response;\n  });\n}","map":{"version":3,"sources":["/Users/jin/Desktop/bi/client/api/ApiService.js"],"names":["API_BASE_URL","call","api","method","data","config","headers","Headers","accessToken","localStorage","getItem","append","options","url","body","JSON","stringify","fetch","then","response","json","status","Promise","reject","loadUser","user","res","console","log","alert","window","location","href","logIn","myreviewlist","userId","signup","signout","setItem","reviewinsert","review","reviewfileinsert","file","restaurantlist"],"mappings":"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","sourcesContent":["import {API_BASE_URL} from './config.js';\n\nfunction call(api, method, data, config){\n    let headers;\n\n    if(config === 'reviewInsertFile'){\n        headers = new Headers({});\n\n    }else{\n        headers = new Headers({\n             \"Content-Type\":\"application/json\",\n         });\n    }\n\n    const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n    if(accessToken && accessToken !== null){\n        headers.append(\"Authorization\", \"Bearer \"+ accessToken);\n    }\n\n    const options = {\n        headers,\n        url: API_BASE_URL + api,\n        method,\n    };\n\n    if(data && config !== 'reviewInsertFile'){\n        options.body= JSON.stringify(data);\n    }else {\n        options.body = data;\n    }\n\n    return fetch(options.url, options).then((response) =>\n        response.json().then((json) => {\n            if(response.status !== 200){\n                return Promise.reject(json);\n            }\n            return json;\n        }));\n}\n\nexport function loadUser(user){\n\n    const headers = new Headers({\"Content-Type\":\"application/json\"});\n    const api = \"/auth\"\n    const method = \"GET\"\n    const options = {\n        headers,\n        url: API_BASE_URL + api,\n        method\n    };\n\n    options.body = JSON.stringify(user);\n\n    return fetch(options.url, options).then((res) =>\n        res.json().then((json) => {\n            console.log(res);\n            if(res.status == 400){\n                alert('!')\n                window.location.href = \"/\"\n            }\n            return json;\n        }));\n\n}\n\nexport function logIn(user) {\n\n    const headers = new Headers({\"Content-Type\":\"application/json\"});\n    const api = \"/auth/login\"\n    const method = \"POST\"\n    const options = {\n        headers,\n        url: API_BASE_URL + api,\n        method,\n    };\n\n    options.body = JSON.stringify(user);\n\n    return fetch(options.url, options).then((res) =>\n        res.json().then((json) => {\n            console.log(res);\n            if(res.status !== 200){\n                return Promise.reject(json);\n            }\n            return json;\n        }));\n}\n\nexport function myreviewlist(userId) {\n    console.log('myreviewlist API Called')\n    return call(\"/review/userReview\", \"GET\", userId)\n        .then((response) => {\n            if(response) {\n                console.log(\"response: \", response);\n            }\n            return response;\n        });\n}\n\n\nexport function signup(user) {\n    return call(\"/auth/signup\", \"POST\", user)\n        .then((response) => {\n            console.log(response.status)\n            if(response.status === 200) {\n                alert(\"회원가입이 완료되었습니다:)\");\n                location.href = '/'\n            } else {\n                alert(\"회원가입에 실패하였습니다..\");\n            }\n        });\n}\n\nexport function signout() {\n    localStorage.setItem(\"ACCESS_TOKEN\", null);\n}\n\nexport function reviewinsert({review}) {\n    return call(\"/review/insert\", \"POST\", review)\n        .then((response) => {\n            console.log(response);\n            alert(\"리뷰등록이 완료되었습니다:)\");\n            location.href = '/';\n        });\n}\n\nexport function reviewfileinsert({file}){\n    const data = file;\n    console.log(data)\n    return call(\"/review/insertFile\", \"POST\", data, 'reviewInsertFile')\n        .then((response) => {\n            console.log(response);\n            location.href = '/';\n        });\n}\n\nexport function restaurantlist() {\n    alert('!!');\n    return call(\"/restaurant/list\", \"GET\")\n        .then((response) => {\n            if(response) {\n                console.log(\"response: \", response);\n            }\n            return response;\n        });\n}\n\n"]},"metadata":{},"sourceType":"module"}