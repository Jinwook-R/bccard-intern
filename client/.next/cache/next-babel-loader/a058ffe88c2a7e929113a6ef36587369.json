{"ast":null,"code":"import { API_BASE_URL } from './config.js';\n\nfunction call(api, method, data, config) {\n  var headers;\n\n  if (config) {\n    headers = new Headers({\n      \"Content-Type\": \"application/json\"\n    });\n  }\n\n  var accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n\n  if (accessToken && accessToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n\n  var options = {\n    headers: headers,\n    url: API_BASE_URL + api,\n    method: method\n  };\n\n  if (data) {\n    options.body = JSON.stringify(data);\n  }\n\n  return fetch(options.url, options).then(function (response) {\n    return response.json().then(function (json) {\n      console.log(json, 'json');\n\n      if (!response.ok) {\n        return Promise.reject(json);\n      }\n\n      return json;\n    });\n  });\n}\n\nexport function signin(user) {\n  return call(\"/auth/signin\", \"POST\", user).then(function (response) {\n    if (response.token) {\n      localStorage.setItem(\"ACCESS_TOKEN\", response.token);\n    }\n\n    return response;\n  });\n}\nexport function signup(user) {\n  return call(\"/auth/signup\", \"POST\", user).then(function (response) {\n    if (response.status === 200) {\n      alert(\"회원가입이 완료되었습니다:)\");\n      location.href = '/';\n    } else {\n      alert(\"회원가입에 실패하였습니다..\");\n    }\n  });\n}\nexport function signout() {\n  localStorage.setItem(\"ACCESS_TOKEN\", null);\n}\nexport function reviewinsert(_ref) {\n  var config = _ref.config,\n      review = _ref.review;\n  return call(\"/review/insert\", \"POST\", review, config).then(function (response) {\n    console.log(response);\n    alert(\"리뷰등록이 완료되었습니다:)\");\n    location.href = '/';\n  });\n}\nexport function restaurantlist() {\n  return call(\"/restaurant/list\", \"GET\").then(function (response) {\n    if (response) {\n      console.log(\"response: \", response);\n    }\n\n    return response;\n  });\n}","map":{"version":3,"sources":["/Users/bccard/Desktop/bccard-intern/client/api/ApiService.js"],"names":["API_BASE_URL","call","api","method","data","config","headers","Headers","accessToken","localStorage","getItem","append","options","url","body","JSON","stringify","fetch","then","response","json","console","log","ok","Promise","reject","signin","user","token","setItem","signup","status","alert","location","href","signout","reviewinsert","review","restaurantlist"],"mappings":"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","sourcesContent":["import {API_BASE_URL} from './config.js';\nfunction call(api, method, data, config){\n    let headers;\n    \n    if(config){\n         headers = new Headers({\n            \"Content-Type\":\"application/json\",\n        });\n    }\n\n    \n    const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n    if(accessToken && accessToken !== null){\n        headers.append(\"Authorization\", \"Bearer \"+ accessToken);\n    }\n\n    const options = {\n        headers,\n        url: API_BASE_URL + api,\n        method,\n    };\n\n    if(data){\n        options.body= JSON.stringify(data);\n    }\n\n    return fetch(options.url, options).then((response) =>\n        response.json().then((json) => {\n            console.log(json,'json');\n            if(!response.ok){\n                return Promise.reject(json);\n            }\n            return json;\n        }));\n}\n\nexport function signin(user) {\n    return call(\"/auth/signin\", \"POST\", user)\n        .then((response) => {\n            if(response.token){\n                localStorage.setItem(\"ACCESS_TOKEN\", response.token);\n            }\n            return response;\n        });\n}\n\nexport function signup(user) {\n    return call(\"/auth/signup\", \"POST\", user)\n        .then((response) => {\n            if(response.status === 200) {\n                alert(\"회원가입이 완료되었습니다:)\");\n                location.href = '/'\n            } else {\n                alert(\"회원가입에 실패하였습니다..\");\n            }\n        });\n}\n\nexport function signout() {\n    localStorage.setItem(\"ACCESS_TOKEN\", null);\n}\n\nexport function reviewinsert({config, review}) {\n    return call(\"/review/insert\", \"POST\", review, config)\n        .then((response) => {\n            console.log(response);\n            alert(\"리뷰등록이 완료되었습니다:)\");\n            location.href = '/';\n        });\n}\n\nexport function restaurantlist() {\n    return call(\"/restaurant/list\", \"GET\")\n        .then((response) => {\n            if(response) {\n                console.log(\"response: \", response);\n            }\n            return response;\n        });\n}\n\n"]},"metadata":{},"sourceType":"module"}