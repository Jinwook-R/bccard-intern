{"ast":null,"code":"import { logIn, signup } from '../api/ApiService';\nimport { all, fork, takeEvery, call, put, delay } from 'redux-saga/effects';\nimport * as actions from '../reducers/user';\nimport { SIGN_IN_FAILURE, SIGN_IN_SUCCESS, SIGN_UP_SUCCESS, SIGN_OUT_FAILURE, SIGN_OUT_SUCCESS, LOAD_USER_SUCCESS } from \"../reducers/user\";\nexport const initialState = {\n  user: null,\n  signInLoading: false,\n  signInSucceed: false,\n  signInError: null\n};\n\nfunction loadUserAPI(data) {\n  return loadUser(data);\n}\n\nfunction signInAPI(data) {\n  return logIn(data);\n}\n\nfunction* loadUser({\n  payload\n}) {\n  try {\n    const {\n      userData\n    } = payload;\n    const result = yield call(loadUserAPI, userData);\n    yield put({\n      type: LOAD_USER_SUCCESS,\n      payload: result\n    });\n  } catch (error) {}\n}\n\nfunction* signIn({\n  payload\n}) {\n  console.log('signIn:', payload);\n\n  try {\n    const {\n      signInData\n    } = payload;\n    const result = yield call(signInAPI, signInData);\n    console.log('signIn result:', result);\n    yield put({\n      type: SIGN_IN_SUCCESS,\n      payload: result\n    });\n  } catch (err) {\n    console.log('signInError:', err.response.data);\n    yield put({\n      type: SIGN_IN_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction signUpAPI(data) {\n  return signup(data);\n}\n\nfunction* signUp({\n  payload\n}) {\n  try {\n    const {\n      signUpData\n    } = payload;\n    const result = yield call(signUpAPI, signUpData);\n    yield put({\n      type: SIGN_UP_SUCCESS,\n      payload: result\n    });\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction signOutAPI() {// return signout();\n}\n\nfunction* signOut() {\n  try {\n    // const result = yield call(logOutAPI);\n    yield delay(1000);\n    yield put({\n      type: SIGN_OUT_SUCCESS\n    });\n  } catch (err) {\n    console.error(err);\n    yield put({\n      type: SIGN_OUT_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction* watchSignIn() {\n  yield takeEvery(actions.SIGN_IN_REQUEST, signIn);\n}\n\nfunction* watchSignUp() {\n  yield takeEvery(actions.SIGN_UP_REQUEST, signUp);\n}\n\nexport default function* userSaga() {\n  yield all([fork(watchSignIn), fork(watchSignUp)]);\n}","map":{"version":3,"sources":["/Users/jin/Desktop/bi/client/sagas/user.js"],"names":["logIn","signup","all","fork","takeEvery","call","put","delay","actions","SIGN_IN_FAILURE","SIGN_IN_SUCCESS","SIGN_UP_SUCCESS","SIGN_OUT_FAILURE","SIGN_OUT_SUCCESS","LOAD_USER_SUCCESS","initialState","user","signInLoading","signInSucceed","signInError","loadUserAPI","data","loadUser","signInAPI","payload","userData","result","type","error","signIn","console","log","signInData","err","response","signUpAPI","signUp","signUpData","signOutAPI","signOut","watchSignIn","SIGN_IN_REQUEST","watchSignUp","SIGN_UP_REQUEST","userSaga"],"mappings":"AAAA,SAAQA,KAAR,EAAeC,MAAf,QAA4B,mBAA5B;AACA,SAASC,GAAT,EAAcC,IAAd,EAAoBC,SAApB,EAA+BC,IAA/B,EAAqCC,GAArC,EAA0CC,KAA1C,QAAuD,oBAAvD;AACA,OAAO,KAAKC,OAAZ,MAAyB,kBAAzB;AACA,SACIC,eADJ,EAEIC,eAFJ,EAGIC,eAHJ,EAIIC,gBAJJ,EAKIC,gBALJ,EAMIC,iBANJ,QAOO,kBAPP;AASA,OAAO,MAAMC,YAAY,GAAG;AACxBC,EAAAA,IAAI,EAAE,IADkB;AAExBC,EAAAA,aAAa,EAAE,KAFS;AAGxBC,EAAAA,aAAa,EAAE,KAHS;AAIxBC,EAAAA,WAAW,EAAE;AAJW,CAArB;;AAOP,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AACvB,SAAOC,QAAQ,CAACD,IAAD,CAAf;AACH;;AAED,SAASE,SAAT,CAAmBF,IAAnB,EAAyB;AACrB,SAAOrB,KAAK,CAACqB,IAAD,CAAZ;AACH;;AAED,UAAUC,QAAV,CAAmB;AAACE,EAAAA;AAAD,CAAnB,EAA8B;AACzB,MAAI;AACD,UAAM;AAACC,MAAAA;AAAD,QAAaD,OAAnB;AACA,UAAME,MAAM,GAAG,MAAMrB,IAAI,CAACe,WAAD,EAAcK,QAAd,CAAzB;AAEA,UAAMnB,GAAG,CAAC;AACNqB,MAAAA,IAAI,EAAEb,iBADA;AAENU,MAAAA,OAAO,EAAEE;AAFH,KAAD,CAAT;AAIH,GARA,CAQA,OAAOE,KAAP,EAAc,CAEd;AACJ;;AAED,UAAUC,MAAV,CAAiB;AAACL,EAAAA;AAAD,CAAjB,EAA4B;AAExBM,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBP,OAAtB;;AAEA,MAAI;AACA,UAAM;AAACQ,MAAAA;AAAD,QAAeR,OAArB;AACA,UAAME,MAAM,GAAG,MAAMrB,IAAI,CAACkB,SAAD,EAAYS,UAAZ,CAAzB;AAEAF,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6BL,MAA7B;AACA,UAAMpB,GAAG,CAAC;AACNqB,MAAAA,IAAI,EAAEjB,eADA;AAENc,MAAAA,OAAO,EAAEE;AAFH,KAAD,CAAT;AAIH,GATD,CASE,OAAOO,GAAP,EAAY;AACVH,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BE,GAAG,CAACC,QAAJ,CAAab,IAAzC;AACA,UAAMf,GAAG,CAAC;AACNqB,MAAAA,IAAI,EAAElB,eADA;AAENmB,MAAAA,KAAK,EAAEK,GAAG,CAACC,QAAJ,CAAab;AAFd,KAAD,CAAT;AAIH;AACJ;;AAED,SAASc,SAAT,CAAmBd,IAAnB,EAAyB;AACrB,SAAOpB,MAAM,CAACoB,IAAD,CAAb;AACH;;AAED,UAAUe,MAAV,CAAiB;AAACZ,EAAAA;AAAD,CAAjB,EAA4B;AACxB,MAAI;AACA,UAAM;AAACa,MAAAA;AAAD,QAAeb,OAArB;AACA,UAAME,MAAM,GAAG,MAAMrB,IAAI,CAAC8B,SAAD,EAAYE,UAAZ,CAAzB;AAEA,UAAM/B,GAAG,CAAC;AACNqB,MAAAA,IAAI,EAAEhB,eADA;AAENa,MAAAA,OAAO,EAAEE;AAFH,KAAD,CAAT;AAIH,GARD,CAQE,OAAOO,GAAP,EAAY;AACVH,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACH;AACJ;;AAED,SAASK,UAAT,GAAsB,CAClB;AACH;;AAED,UAAUC,OAAV,GAAoB;AAChB,MAAI;AACA;AACA,UAAMhC,KAAK,CAAC,IAAD,CAAX;AACA,UAAMD,GAAG,CAAC;AACNqB,MAAAA,IAAI,EAAEd;AADA,KAAD,CAAT;AAGH,GAND,CAME,OAAOoB,GAAP,EAAY;AACVH,IAAAA,OAAO,CAACF,KAAR,CAAcK,GAAd;AACA,UAAM3B,GAAG,CAAC;AACNqB,MAAAA,IAAI,EAAEf,gBADA;AAENgB,MAAAA,KAAK,EAAEK,GAAG,CAACC,QAAJ,CAAab;AAFd,KAAD,CAAT;AAIH;AACJ;;AAED,UAAUmB,WAAV,GAAwB;AACpB,QAAMpC,SAAS,CAACI,OAAO,CAACiC,eAAT,EAA0BZ,MAA1B,CAAf;AACH;;AAED,UAAUa,WAAV,GAAwB;AACpB,QAAMtC,SAAS,CAACI,OAAO,CAACmC,eAAT,EAA0BP,MAA1B,CAAf;AACH;;AAED,eAAe,UAAUQ,QAAV,GAAqB;AAChC,QAAM1C,GAAG,CAAC,CACNC,IAAI,CAACqC,WAAD,CADE,EAENrC,IAAI,CAACuC,WAAD,CAFE,CAAD,CAAT;AAIH","sourcesContent":["import {logIn, signup} from '../api/ApiService';\nimport { all, fork, takeEvery, call, put, delay } from 'redux-saga/effects';\nimport * as actions from '../reducers/user';\nimport {\n    SIGN_IN_FAILURE,\n    SIGN_IN_SUCCESS,\n    SIGN_UP_SUCCESS,\n    SIGN_OUT_FAILURE,\n    SIGN_OUT_SUCCESS,\n    LOAD_USER_SUCCESS\n} from \"../reducers/user\";\n\nexport const initialState = {\n    user: null,\n    signInLoading: false,\n    signInSucceed: false,\n    signInError: null\n}\n\nfunction loadUserAPI(data) {\n    return loadUser(data);\n}\n\nfunction signInAPI(data) {\n    return logIn(data);\n}\n\nfunction* loadUser({payload}) {\n     try {\n        const {userData} = payload;\n        const result = yield call(loadUserAPI, userData);\n\n        yield put({\n            type: LOAD_USER_SUCCESS,\n            payload: result,\n        });\n    }catch (error) {\n\n    }\n}\n\nfunction* signIn({payload}) {\n\n    console.log('signIn:',payload);\n\n    try {\n        const {signInData} = payload;\n        const result = yield call(signInAPI, signInData);\n\n        console.log('signIn result:',result);\n        yield put({\n            type: SIGN_IN_SUCCESS,\n            payload: result,\n        });\n    } catch (err) {\n        console.log('signInError:', err.response.data);\n        yield put({\n            type: SIGN_IN_FAILURE,\n            error: err.response.data,\n        });\n    }\n}\n\nfunction signUpAPI(data) {\n    return signup(data);\n}\n\nfunction* signUp({payload}) {\n    try {\n        const {signUpData} = payload;\n        const result = yield call(signUpAPI, signUpData);\n\n        yield put({\n            type: SIGN_UP_SUCCESS,\n            payload: result,\n        });\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nfunction signOutAPI() {\n    // return signout();\n}\n\nfunction* signOut() {\n    try {\n        // const result = yield call(logOutAPI);\n        yield delay(1000);\n        yield put({\n            type: SIGN_OUT_SUCCESS,\n        });\n    } catch (err) {\n        console.error(err);\n        yield put({\n            type: SIGN_OUT_FAILURE,\n            error: err.response.data,\n        });\n    }\n}\n\nfunction* watchSignIn() {\n    yield takeEvery(actions.SIGN_IN_REQUEST, signIn);\n}\n\nfunction* watchSignUp() {\n    yield takeEvery(actions.SIGN_UP_REQUEST, signUp);\n}\n\nexport default function* userSaga() {\n    yield all([\n        fork(watchSignIn),\n        fork(watchSignUp),\n    ]);\n}"]},"metadata":{},"sourceType":"module"}