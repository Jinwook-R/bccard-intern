{"ast":null,"code":"import { loadUserRequest, logInRequest, signOutRequest, signup } from '../api/ApiService';\nimport { all, fork, takeEvery, call, put, delay } from 'redux-saga/effects';\nimport * as actions from '../reducers/user';\nimport { SIGN_IN_FAILURE, SIGN_IN_SUCCESS, SIGN_UP_SUCCESS, SIGN_OUT_FAILURE, SIGN_OUT_SUCCESS, LOAD_USER_SUCCESS } from \"../reducers/user\";\n\nfunction loadUserAPI(data) {\n  console.log('loadUserAPI start', data);\n  return loadUserRequest(data);\n}\n\nfunction signInAPI(data) {\n  return logInRequest(data);\n}\n\nfunction* loadUser({\n  payload\n}) {\n  try {\n    const {\n      user\n    } = payload;\n    const result = yield call(loadUserAPI, user);\n    yield put({\n      type: LOAD_USER_SUCCESS,\n      payload: result.data\n    });\n  } catch (error) {}\n}\n\nfunction* signIn({\n  payload\n}) {\n  try {\n    const {\n      signInData\n    } = payload;\n    const result = yield call(signInAPI, signInData);\n    yield put({\n      type: SIGN_IN_SUCCESS,\n      payload: result.data\n    });\n    localStorage.setItem(\"id\", result.data.id);\n  } catch (err) {\n    alert(err.response.data);\n    yield put({\n      type: SIGN_IN_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction signUpAPI(data) {\n  return signup(data);\n}\n\nfunction* signUp({\n  payload\n}) {\n  try {\n    const {\n      signUpData\n    } = payload;\n    const result = yield call(signUpAPI, signUpData);\n    yield put({\n      type: SIGN_UP_SUCCESS,\n      payload: result\n    });\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction signOutAPI() {\n  console.log('signOutRequestAPI Called');\n  return signOutRequest();\n}\n\nfunction* signOut() {\n  console.log('signOut');\n\n  try {\n    const result = yield call(signOutAPI);\n    console.log(result);\n    yield put({\n      type: SIGN_OUT_SUCCESS\n    });\n  } catch (err) {\n    console.error(err);\n    yield put({\n      type: SIGN_OUT_FAILURE,\n      error: err.response.data\n    });\n  }\n}\n\nfunction* watchSignIn() {\n  yield takeEvery(actions.SIGN_IN_REQUEST, signIn);\n}\n\nfunction* watchSignUp() {\n  yield takeEvery(actions.SIGN_UP_REQUEST, signUp);\n}\n\nfunction* watchSignOut() {\n  yield takeEvery(actions.SIGN_OUT_REQUEST, signOut);\n}\n\nfunction* watchLoadUser() {\n  yield takeEvery(actions.LOAD_USER_REQUEST, loadUser);\n}\n\nexport default function* userSaga() {\n  yield all([fork(watchSignIn), fork(watchSignUp), fork(watchSignOut), fork(watchLoadUser)]);\n}","map":{"version":3,"sources":["/Users/jin/Desktop/bi/client/sagas/user.js"],"names":["loadUserRequest","logInRequest","signOutRequest","signup","all","fork","takeEvery","call","put","delay","actions","SIGN_IN_FAILURE","SIGN_IN_SUCCESS","SIGN_UP_SUCCESS","SIGN_OUT_FAILURE","SIGN_OUT_SUCCESS","LOAD_USER_SUCCESS","loadUserAPI","data","console","log","signInAPI","loadUser","payload","user","result","type","error","signIn","signInData","localStorage","setItem","id","err","alert","response","signUpAPI","signUp","signUpData","signOutAPI","signOut","watchSignIn","SIGN_IN_REQUEST","watchSignUp","SIGN_UP_REQUEST","watchSignOut","SIGN_OUT_REQUEST","watchLoadUser","LOAD_USER_REQUEST","userSaga"],"mappings":"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","sourcesContent":["import {loadUserRequest, logInRequest, signOutRequest, signup} from '../api/ApiService';\nimport { all, fork, takeEvery, call, put, delay } from 'redux-saga/effects';\nimport * as actions from '../reducers/user';\nimport {\n    SIGN_IN_FAILURE,\n    SIGN_IN_SUCCESS,\n    SIGN_UP_SUCCESS,\n    SIGN_OUT_FAILURE,\n    SIGN_OUT_SUCCESS,\n    LOAD_USER_SUCCESS\n} from \"../reducers/user\";\n\nfunction loadUserAPI(data) {\n    console.log('loadUserAPI start',data);\n    return loadUserRequest(data);\n}\n\nfunction signInAPI(data) {\n    return logInRequest(data);\n}\n\nfunction* loadUser({payload}) {\n     try {\n        const {user} = payload;\n        const result = yield call(loadUserAPI, user);\n\n        yield put({\n            type: LOAD_USER_SUCCESS,\n            payload: result.data,\n        });\n    }catch (error) {\n\n    }\n}\n\nfunction* signIn({payload}) {\n    try {\n        const {signInData} = payload;\n        const result = yield call(signInAPI, signInData);\n        yield put({\n            type: SIGN_IN_SUCCESS,\n            payload: result.data,\n        });\n        localStorage.setItem(\"id\",result.data.id);\n    } catch (err) {\n        alert(err.response.data);\n        yield put({\n            type: SIGN_IN_FAILURE,\n            error: err.response.data,\n        });\n    }\n}\n\nfunction signUpAPI(data) {\n    return signup(data);\n}\n\nfunction* signUp({payload}) {\n    try {\n        const {signUpData} = payload;\n        const result = yield call(signUpAPI, signUpData);\n\n        yield put({\n            type: SIGN_UP_SUCCESS,\n            payload: result,\n        });\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nfunction signOutAPI() {\n    console.log('signOutRequestAPI Called');\n    return signOutRequest();\n}\n\nfunction* signOut() {\n    console.log('signOut');\n    try {\n        const result = yield call(signOutAPI);\n        console.log(result)\n        yield put({\n            type: SIGN_OUT_SUCCESS,\n        });\n    } catch (err) {\n        console.error(err);\n        yield put({\n            type: SIGN_OUT_FAILURE,\n            error: err.response.data,\n        });\n    }\n}\n\nfunction* watchSignIn() {\n    yield takeEvery(actions.SIGN_IN_REQUEST, signIn);\n}\n\nfunction* watchSignUp() {\n    yield takeEvery(actions.SIGN_UP_REQUEST, signUp);\n}\n\nfunction* watchSignOut() {\n    yield takeEvery(actions.SIGN_OUT_REQUEST, signOut);\n}\n\nfunction* watchLoadUser() {\n    yield takeEvery(actions.LOAD_USER_REQUEST, loadUser);\n}\n\n\n\nexport default function* userSaga() {\n    yield all([\n        fork(watchSignIn),\n        fork(watchSignUp),\n        fork(watchSignOut),\n        fork(watchLoadUser),\n    ]);\n}"]},"metadata":{},"sourceType":"module"}